<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:sd="http://www.thymeleaf.org/spring-data">

    <section th:fragment="navigation-taskstates(rootCategories,thisProject)">
        <div class="container" id="categoryNavigationWell" sec:authorize="isAuthenticated()">
            <ul id="taskStateMenu" class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active" id="focus_inbox" th:href="@{/taskstate/inbox}">
                        <i class="fas fa-inbox"></i>
                        <span th:text="#{layout.page.inbox}">Inbox</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="focus_today" th:href="@{/taskstate/today}">
                        <i class="fas fa-clock"></i>
                        <span th:text="#{layout.page.today}">Today</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="focus_next" th:href="@{/taskstate/next}">
                        <i class="fas fa-cogs"></i>
                        <span th:text="#{layout.page.next}">Next</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="focus_waiting" th:href="@{/taskstate/waiting}">
                        <i class="fas fa-hourglass-half"></i>
                        <span th:text="#{layout.page.waiting}">Waiting</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="focus_scheduled" th:href="@{/taskstate/scheduled}">
                        <i class="fas fa-calendar-alt"></i>
                        <span th:text="#{layout.page.scheduled}">Scheduled</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="focus_someday" th:href="@{/taskstate/someday}">
                        <i class="fas fa-road"></i>
                        <span th:text="#{layout.page.someday}">Someday</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="star" th:href="@{/taskstate/focus}">
                        <i class="fas fa-star"></i>
                        <span th:text="#{layout.page.focus}">Focus</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="focus_completed" th:href="@{/taskstate/completed}">
                        <i class="fas fa-check-square"></i>
                        <span th:text="#{layout.page.completed}">Completed Tasks</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="focus_trash" th:href="@{/taskstate/trash}">
                        <i class="fas fa-trash-alt"></i>
                        <span th:text="#{layout.page.trash}">Trash</span>
                    </a>
                </li>
            </ul>
        </div>
    </section>

    <section th:fragment="navigation-projects(rootCategories,thisProject)">
        <div class="container" id="projectNavigationWell" sec:authorize="isAuthenticated()">
            <hr/>
            <ul id="rootProject" class="nav flex-column">
                <li class="nav-item">
                    <span id="project_0" class="projectDraggable projectDroppable" th:if="${thisProject == null or thisProject.id != 0}">
                        <i class="fas fa-folder-open"></i>
                        <strong><span th:text="#{right.nav.projects}">Projects</span></strong>
                    </span>
                    <span id="project_0" class="projectDraggable projectDroppable" th:if="${thisProject != null and thisProject.id == 0}">
                        <a class="nav-link" th:href="@{/project/0}">
                            <i class="fas fa-folder-open"></i>
                            <span th:text="#{right.nav.projects}">Projects</span>
                        </a>
                    </span>
                </li>
                <li class="nav-item" th:if="${rootCategories != null and rootCategories.size() gt 0}">
                    <ul class="nav flex-column">
                        <li class="nav-item" th:include="this :: tw-project-submenu(categories=${rootCategories},thisProject=${thisProject})"></li>
                    </ul>
                </li>
            </ul>
        </div>
    </section>

    <ul class="nav flex-column" th:fragment="tw-project-submenu(categories, thisProject)">
        <li th:each="project : ${categories}" th:class="${project.id == thisProject.id ? 'nav-item active' : 'nav-item'}">
            <!-- http://jqueryui.com/droppable/ -->
            <span th:if="${project.id == thisProject.id}">
                <strong>
                    <span th:id="'project_' + ${project.id}" th:text="${project.name}" class="projectDraggable projectDroppable">
                    </span>
                </strong>
            </span>
            <span th:if="${project.id != thisProject.id}">
                <a th:id="'project_' + ${project.id}" th:href="@{/project/{id}(id=${project.id})}" class="projectDraggable projectDroppable">
                    <span th:text="${project.name}"></span>
                </a>
            </span>
            <ul class="nav flex-column" th:if="${project.children.size() gt 0}">
                <li th:include="this :: tw-project-submenu(categories=${project.children},thisProject=${thisProject})"></li>
            </ul>
        </li>
    </ul>

</html>