<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:sd="http://www.thymeleaf.org/spring-data">

    <section th:fragment="navigation-taskstates(rootCategories,thisProject)">
        <div class="container" id="categoryNavigationWell" sec:authorize="isAuthenticated()">
            <ul id="taskStateMenu" class="nav nav-tabs">
                <li class="nav-item">
                    <a id="taskstate_inbox" th:href="@{/taskstate/inbox}" class="nav-link active">
                        <i class="fas fa-inbox"></i>
                        <span th:text="#{layout.page.inbox}">Inbox</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a id="taskstate_today" th:href="@{/taskstate/today}" class="nav-link">
                        <i class="fas fa-clock"></i>
                        <span th:text="#{layout.page.today}">Today</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a id="taskstate_next" th:href="@{/taskstate/next}" class="nav-link">
                        <i class="fas fa-cogs"></i>
                        <span th:text="#{layout.page.next}">Next</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a id="taskstate_waiting" th:href="@{/taskstate/waiting}" class="nav-link">
                        <i class="fas fa-hourglass-half"></i>
                        <span th:text="#{layout.page.waiting}">Waiting</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a id="taskstate_scheduled" th:href="@{/taskstate/scheduled}" class="nav-link">
                        <i class="fas fa-calendar-alt"></i>
                        <span th:text="#{layout.page.scheduled}">Scheduled</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a id="taskstate_someday" th:href="@{/taskstate/someday}" class="nav-link">
                        <i class="fas fa-road"></i>
                        <span th:text="#{layout.page.someday}">Someday</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a id="taskstate_focus" th:href="@{/taskstate/focus}" class="nav-link">
                        <i class="fas fa-star"></i>
                        <span th:text="#{layout.page.focus}">Focus</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a id="taskstate_completed" th:href="@{/taskstate/completed}" class="nav-link">
                        <i class="fas fa-check-square"></i>
                        <span th:text="#{layout.page.completed}">Completed Tasks</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a id="taskstate_trash" th:href="@{/taskstate/trash}" class="nav-link">
                        <i class="fas fa-trash-alt"></i>
                        <span th:text="#{layout.page.trash}">Trash</span>
                    </a>
                </li>
            </ul>
        </div>
    </section>

    <section th:fragment="navigation-projects(rootCategories,thisProject)">
        <div class="container" id="projectNavigationWell" sec:authorize="isAuthenticated()">
            <hr/>
            <ul id="rootProject">
                <li th:if="${thisProject == null or thisProject.id != 0}">
                    <span id="project_0" class="projectDraggable projectDroppable">
                        <i class="fas fa-folder-open"></i>
                        <strong>
                            <span th:text="#{right.nav.projects}">Projects</span>
                        </strong>
                    </span>
                </li>
                <li th:if="${thisProject != null and thisProject.id == 0}">
                    <span id="project_0" class="projectDraggable projectDroppable">
                        <a th:href="@{/project/0}">
                            <i class="fas fa-folder-open"></i>
                            <span th:text="#{right.nav.projects}">Projects</span>
                        </a>
                    </span>
                </li>
                <li th:if="${rootCategories != null and rootCategories.size() gt 0}">
                    <ul>
                        <li th:include="this :: tw-project-submenu(categories=${rootCategories},thisProject=${thisProject})"></li>
                    </ul>
                </li>
            </ul>
        </div>
    </section>

    <ul class="nav flex-column" th:fragment="tw-project-submenu(categories, thisProject)">
        <li th:each="project : ${categories}" th:class="${project.id == thisProject.id ? 'active' : ''}">
            <!-- http://jqueryui.com/droppable/ -->
            <span th:if="${project.id == thisProject.id}">
                <span th:id="'project_' + ${project.id}" class="projectDraggable projectDroppable">
                    <strong>
                        <span th:text="${project.name}" ></span>
                    </strong>
                </span>
            </span>
            <span th:if="${project.id != thisProject.id}">
                <span th:id="'project_' + ${project.id}" class="projectDraggable projectDroppable">
                    <a th:href="@{/project/{id}(id=${project.id})}">
                        <span th:text="${project.name}"></span>
                    </a>
                </span>
            </span>
        </li>
        <li th:if="${project.children.size() gt 0}">
            <ul>
                <li th:include="this :: tw-project-submenu(categories=${project.children},thisProject=${thisProject})"></li>
            </ul>
        </li>
    </ul>

</html>