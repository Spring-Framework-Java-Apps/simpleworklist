<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="t/layout/page :: head">
</head>
<body th:replace="t/layout/page :: tw-page-body(~{::mytwcontent})">
<div th:fragment="mytwcontent">

	<!-- New Task Form -->
	<h1>
		<span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> &nbsp;
		<span th:utext="#{task.add.h1}">Add Task</span>
	</h1>

	<div>
	<form:form id="formId" commandName="task" method="post">
		<form:hidden path="taskState" />
		<form:hidden path="userAccount.id" />
		<form:hidden path="createdTimestamp.time" />
		<div class="form-group">
			<form:label path="title">
				<span th:utext="#{task.add.title}">task.add.title</span>
			</form:label>
			<form:input path="title" class="form-control"/>
			<form:errors path="title" delimiter=", " element="div" class="alert alert-danger"/>
		</div>
		<div class="form-group">
			<form:label path="dueDate">
				<span th:utext="#{task.add.dueDate}">task.add.dueDate</span>
			</form:label>
			<form:input id="taskDueDate"  path="dueDate" class="form-control"/>
			<form:errors path="dueDate" delimiter=", " element="div" class="alert alert-danger"/>
		</div>
		<div class="form-group">
			<form:label path="text">
				<span th:utext="#{task.add.text}">Text</span>
			</form:label>
			<form:textarea path="text" rows="10" cols="50"  class="form-control"/>
			<form:errors path="text" delimiter=", " element="div" class="alert alert-danger"/>
		</div>
		<div>
		<span class="form-group">
			<form:label path="taskEnergy">
				<span th:utext="#{task.add.taskEnergy}">Energy</span>
			</form:label>
			<form:select  path="taskEnergy">
				<c:forEach items="${listTaskEnergy}" var="taskEnergyItem">
					<c:choose>
						<c:when test="${taskEnergyItem.id == task.taskEnergy.id}">
							<option value="${taskEnergyItem.value}" selected>
								<span th:utext="#{taskEnergyItem.code}">taskEnergyItem.code</span>
							</option>
						</c:when>
						<c:otherwise>
							<option value="${taskEnergyItem.value}">
								<span th:utext="#{taskEnergyItem.code}">taskEnergyItem.code</span>
							</option>
						</c:otherwise>
					</c:choose>
				</c:forEach>
			</form:select>
			<form:errors path="taskEnergy" delimiter=", " element="div" class="alert alert-danger"/>
		</span>&nbsp;
		<span class="form-group">
			<form:label path="taskTime">
				<span th:utext="#{task.add.taskTime}">Time</span>
			</form:label>
			<form:select  path="taskTime">
				<c:forEach items="${listTaskTime}" var="taskTimeItem">
					<c:choose>
						<c:when test="${taskTimeItem.id == task.taskTime.id}">
							<option value="${taskTimeItem.value}" selected>
								<span th:utext="${#messages.msgOrNull(taskTimeItem.code)}">taskTimeItem.code</span>
							</option>
						</c:when>
						<c:otherwise>
							<option value="${taskTimeItem.value}">
								<span th:utext="${#messages.msgOrNull(taskTimeItem.code)}">taskTimeItem.code</span>
							</option>
						</c:otherwise>
					</c:choose>
				</c:forEach>
			</form:select>
			<form:errors path="taskTime" delimiter=", " element="div" class="alert alert-danger"/>
		</span>
		</div>
		<c:if test="${mustChooseArea}">
			<div class="form-group">
				<form:label path="context.id">
					<span th:utext="#{project.edit.contex}">Area</span>
				</form:label>
				<form:select  path="context.id">
					<c:forEach items="${contexts}" var="areaOption">
						<c:choose>
							<c:when test="${locale == 'de'}">
								<c:set var="label" value="${areaOption.nameDe}"/>
							</c:when>
							<c:otherwise>
								<c:set var="label" value="${areaOption.nameEn}"/>
							</c:otherwise>
						</c:choose>
						<c:choose>
							<c:when test="${areaOption.id == task.context.id}">
								<option value="${areaOption.id}" selected>
									<c:out value="${label}"/>
								</option>
							</c:when>
							<c:otherwise>
								<option value="${areaOption.id}">
									<c:out value="${label}"/>
								</option>
							</c:otherwise>
						</c:choose>
					</c:forEach>
				</form:select>
				<form:errors path="context.id" delimiter=", " element="div" class="alert alert-danger"/>
			</div>
		</c:if>
		<c:if test="${! mustChooseArea}">
			<form:hidden path="context.id"/>
		</c:if>
		<button id="createNewTask" type="submit" class="btn btn-default">
			<span class="glyphicon glyphicon-floppy-save" aria-hidden="true"></span>
			<span th:utext="#{task.add.button}">Add Task</span>
		</button>
	</form:form>
	</div>

</div>
</body>
</html>
